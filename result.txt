#.gitignore
# Logs
logs
*.log
npm-debug.log*
yarn-debug.log*
yarn-error.log*
pnpm-debug.log*
lerna-debug.log*

node_modules
dist
dist-ssr
*.local

# Editor directories and files
.vscode/*
!.vscode/extensions.json
.idea
.DS_Store
*.suo
*.ntvs*
*.njsproj
*.sln
*.sw?

#eslint.config.js
import js from "@eslint/js";
import globals from "globals";
import reactHooks from "eslint-plugin-react-hooks";
import reactRefresh from "eslint-plugin-react-refresh";
import { defineConfig, globalIgnores } from "eslint/config";

export default defineConfig([
  globalIgnores(["dist"]),
  {
    files: ["**/*.{js,jsx,ts,tsx}"],
    extends: [
      js.configs.recommended,
      reactHooks.configs.flat.recommended,
      reactRefresh.configs.vite,
    ],
    languageOptions: {
      ecmaVersion: "latest",
      globals: globals.browser,
      parserOptions: {
        ecmaFeatures: { jsx: true },
        sourceType: "module",
      },
    },
  },
]);

#index.html
<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <title>SmartCards</title>
  </head>
  <body>
    <div id="root"></div>
    <script type="module" src="/src/main.tsx"></script>
  </body>
</html>

#package.json
{
  "name": "front_smartcards",
  "private": true,
  "version": "0.0.0",
  "type": "module",
  "scripts": {
    "dev": "vite",
    "build": "vite build",
    "lint": "eslint .",
    "preview": "vite preview"
  },
  "dependencies": {
    "axios": "^1.13.2",
    "react": "^19.2.0",
    "react-dom": "^19.2.0",
    "react-router-dom": "^7.9.6"
  },
  "devDependencies": {
    "@eslint/js": "^9.39.1",
    "@types/node": "^25.2.3",
    "@types/react": "^19.2.14",
    "@types/react-dom": "^19.2.3",
    "@vitejs/plugin-react": "^5.1.1",
    "baseline-browser-mapping": "^2.9.19",
    "eslint": "^9.39.1",
    "eslint-plugin-react-hooks": "^7.0.1",
    "eslint-plugin-react-refresh": "^0.4.24",
    "globals": "^16.5.0",
    "prettier": "^3.8.1",
    "typescript": "^5.9.3",
    "vite": "^7.2.4"
  }
}

#README.md
# React + Vite

This template provides a minimal setup to get React working in Vite with HMR and some ESLint rules.

Currently, two official plugins are available:

- [@vitejs/plugin-react](https://github.com/vitejs/vite-plugin-react/blob/main/packages/plugin-react) uses [Babel](https://babeljs.io/) (or [oxc](https://oxc.rs) when used in [rolldown-vite](https://vite.dev/guide/rolldown)) for Fast Refresh
- [@vitejs/plugin-react-swc](https://github.com/vitejs/vite-plugin-react/blob/main/packages/plugin-react-swc) uses [SWC](https://swc.rs/) for Fast Refresh

## React Compiler

The React Compiler is not enabled on this template because of its impact on dev & build performances. To add it, see [this documentation](https://react.dev/learn/react-compiler/installation).

## Expanding the ESLint configuration

If you are developing a production application, we recommend using TypeScript with type-aware lint rules enabled. Check out the [TS template](https://github.com/vitejs/vite/tree/main/packages/create-vite/template-react-ts) for information on how to integrate TypeScript and [`typescript-eslint`](https://typescript-eslint.io) in your project.
# smartcards_frontend

#tsconfig.json
{
  "compilerOptions": {
    "target": "ESNext",
    "lib": ["DOM", "DOM.Iterable", "ESNext"],
    "module": "ESNext",
    "moduleResolution": "Bundler",
    "jsx": "react-jsx",
    "strict": true,
    "skipLibCheck": true,
    "resolveJsonModule": true,
    "isolatedModules": true,
    "noEmit": true
  },
  "include": ["src"]
}

#vite.config.ts
import { defineConfig } from "vite";
import react from "@vitejs/plugin-react";

export default defineConfig({
  plugins: [react()],
  server: {
    host: "127.0.0.1",
    port: 5173,
  },
});

#src/api.ts
import axios from "axios";
import { logout } from "./auth";

const api = axios.create({
  baseURL: import.meta.env.VITE_API_BASE || "http://localhost:8000",
  timeout: 6000000,
});

api.interceptors.request.use((config) => {
  const token = localStorage.getItem("token");
  if (token && config.headers) {
    config.headers.Authorization = `Bearer ${token}`;
  }
  return config;
});

api.interceptors.response.use(
  (res) => res,
  (err) => {
    if (err.response?.status === 401) logout();
    return Promise.reject(err);
  },
);

export default api;
api;

#src/App.tsx
import { BrowserRouter, Routes, Route, Navigate } from "react-router-dom";
import { ReactNode } from "react";
import Login from "./pages/Login";
import Register from "./pages/Register";
import Home from "./pages/Home";
import Group from "./pages/Group";
import History from "./pages/History";
import Loading from "./pages/Loading";
import { useAuth } from "./AuthContext";

function PrivateRoute({ children }: { children: ReactNode }) {
  const { isAuth } = useAuth();
  return isAuth ? <>{children}</> : <Navigate to="/login" />;
}

export default function App() {
  return (
    <BrowserRouter>
      <Routes>
        <Route
          path="/"
          element={
            <PrivateRoute>
              <Home />
            </PrivateRoute>
          }
        />
        <Route path="/login" element={<Login />} />
        <Route path="/register" element={<Register />} />
        <Route path="/loading" element={<Loading />} />
        <Route
          path="/group/:id"
          element={
            <PrivateRoute>
              <Group />
            </PrivateRoute>
          }
        />
        <Route
          path="/history"
          element={
            <PrivateRoute>
              <History />
            </PrivateRoute>
          }
        />
      </Routes>
    </BrowserRouter>
  );
}

#src/auth.ts
export const saveToken = (token: string): void => {
  localStorage.setItem("token", token);
};

export const logout = (): void => {
  localStorage.removeItem("token");
  window.location.href = "/login";
};

export const isAuth = (): boolean => !!localStorage.getItem("token");

#src/AuthContext.tsx
import { createContext, useContext, useState, ReactNode } from "react";

type AuthContextType = {
  token: string | null;
  login: (t: string) => void;
  logout: () => void;
  isAuth: boolean;
};

const AuthContext = createContext<AuthContextType | null>(null);

export function AuthProvider({ children }: { children: ReactNode }) {
  const [token, setToken] = useState<string | null>(
    localStorage.getItem("token"),
  );

  const login = (t: string) => {
    localStorage.setItem("token", t);
    setToken(t);
  };

  const logout = () => {
    localStorage.removeItem("token");
    setToken(null);
  };

  return (
    <AuthContext.Provider value={{ token, login, logout, isAuth: !!token }}>
      {children}
    </AuthContext.Provider>
  );
}

export const useAuth = () => {
  const ctx = useContext(AuthContext);
  if (!ctx) throw new Error("AuthContext missing");
  return ctx;
};

#src/main.tsx
import React from "react";
import ReactDOM from "react-dom/client";
import App from "./App";
import { AuthProvider } from "./AuthContext";
import "./styles.css";

ReactDOM.createRoot(document.getElementById("root") as HTMLElement).render(
  <AuthProvider>
    <App />
  </AuthProvider>,
);

#src/styles.css
html,
body {
  margin: 0;
  padding: 0;
  overflow-x: hidden;
}

body {
  background: #f5f6f8;
  font-family: "Inter", sans-serif;
}

/* Контейнер всей страницы */
.login-page {
  display: flex;
  flex-direction: column;
  align-items: center;
  margin-top: 60px;
}

/* Логотип */
.logo {
  font-size: 32px;
  background: black;
  color: white;
  padding: 12px;
  border-radius: 12px;
  margin-bottom: 16px;
}

/* Заголовки */
.title {
  font-size: 24px;
  font-weight: 700;
  margin-bottom: 4px;
}

.subtitle {
  font-size: 14px;
  color: #6b7280;
  margin-bottom: 24px;
}

/* Блок формы */
.auth-card {
  width: 360px;
  background: white;
  padding: 28px;
  border-radius: 16px;
  box-shadow: 0 8px 24px rgba(0, 0, 0, 0.05);
}

.auth-card label {
  font-size: 13px;
  font-weight: 600;
  margin-top: 14px;
}

.auth-card input {
  width: 92%;
  padding: 10px 12px;
  margin-top: 6px;
  border: 1px solid #e5e7eb;
  border-radius: 10px;
  background: #f9fafb;
  font-size: 14px;
}

.auth-card input:focus {
  border-color: black;
  outline: none;
}

/* Кнопка */
.auth-card button {
  width: 100%;
  padding: 12px;
  margin-top: 20px;
  background: black;
  color: white;
  border: none;
  border-radius: 10px;
  font-size: 15px;
  cursor: pointer;
  transition: 0.2s;
}

.auth-card button:hover {
  background: #222;
}

.auth-card button:disabled {
  opacity: 0.6;
  cursor: not-allowed;
}

/* Текст регистрации */
.register-text {
  text-align: center;
  margin-top: 18px;
  font-size: 14px;
  color: #555;
}

.register-text span {
  font-weight: 600;
  cursor: pointer;
  transition: color 0.2s;
}

.register-text span:hover {
  color: black;
  text-decoration: underline;
}

.upload-container {
  text-align: center;
  padding: 60px 16px 0;
  font-family: "Inter", sans-serif;
  max-width: 1000px;
  margin: 0 auto;
  width: 100%;
}


.upload-title {
  font-size: 26px;
  font-weight: 700;
  margin-bottom: 6px;
}

.upload-subtitle {
  color: #6b7280;
  font-size: 15px;
  margin-bottom: 32px;
}

/* DROPZONE */
.upload-dropzone {
  width: 100%;
  max-width: 600px;
  margin: 0 auto;
  padding: 40px;
  border: 2px dashed #d1d5db;
  border-radius: 14px;
  background: #fafafa;
  transition: 0.25s;
  cursor: pointer;
  box-sizing: border-box;
}


.upload-dropzone.dragging {
  background: #f0f9ff;
  border-color: #3b82f6;
}

.upload-icon {
  font-size: 42px;
  margin-bottom: 10px;
}

.upload-text {
  font-size: 18px;
  font-weight: 600;
}

.upload-browse {
  display: block;
  margin-top: 4px;
  color: #6b7280;
}

.upload-btn {
  margin-top: 22px;
  background: black;
  color: white;
  padding: 10px 22px;
  border-radius: 8px;
  border: none;
  cursor: pointer;
  transition: 0.2s;
}

.upload-btn:hover {
  background: #222;
}

.upload-hint {
  margin-top: 14px;
  font-size: 14px;
}

/* FEATURES */
.upload-features {
  margin-top: 60px;
  display: flex;
  justify-content: center;
  gap: 40px;
  flex-wrap: wrap;
}


.feature {
  text-align: center;
  width: 160px;
}

.feature-icon {
  font-size: 32px;
  margin-bottom: 8px;
}

.feature h3 {
  margin-bottom: 4px;
  font-size: 16px;
  font-weight: 600;
}

.feature p {
  color: #6b7280;
  font-size: 13px;
}

.loading-page {
  height: 100vh;
  width: 100vw;
  background: #f5f6f8;
  display: flex;
  align-items: center;
  justify-content: center;
  font-family: "Inter", sans-serif;
}

.loading-card {
  background: white;
  padding: 36px 42px;
  border-radius: 16px;
  box-shadow: 0 8px 24px rgba(0, 0, 0, 0.05);
  text-align: center;
  min-width: 300px;
}

/* Иконка */
.loading-logo {
  width: 52px;
  height: 52px;
  margin: 0 auto 18px;
  background: black;
  color: white;
  border-radius: 14px;
  display: flex;
  align-items: center;
  justify-content: center;
  font-size: 22px;
}

/* Точки */
.loading-dots {
  display: flex;
  justify-content: center;
  gap: 6px;
  margin-bottom: 18px;
}

.loading-dots span {
  width: 6px;
  height: 6px;
  background: #111;
  border-radius: 50%;
  opacity: 0.3;
  animation: dot 1.5s infinite;
}

.loading-dots span:nth-child(2) {
  animation-delay: 0.2s;
}

.loading-dots span:nth-child(3) {
  animation-delay: 0.4s;
}

/* Анимация */
@keyframes dot {
  0% {
    opacity: 0.3;
  }

  50% {
    opacity: 1;
  }

  100% {
    opacity: 0.3;
  }
}

/* Текст */
.loading-card h3 {
  font-size: 16px;
  font-weight: 600;
  margin-bottom: 6px;
}

.loading-card p {
  font-size: 13px;
  color: #6b7280;
}

/* GROUP PAGE */

.group-container {
  max-width: 1100px;
  margin: 40px auto;
  padding: 0 20px;
  font-family: "Inter", sans-serif;
}

.group-header {
  display: flex;
  justify-content: space-between;
  align-items: center;
  margin-bottom: 26px;
}

.group-header h1 {
  margin: 0;
  font-size: 26px;
}

.group-header p {
  color: #6b7280;
  margin-top: 4px;
}

.add-card-btn {
  background: black;
  color: white;
  padding: 10px 18px;
  border-radius: 10px;
  border: none;
  cursor: pointer;
}

.add-card-btn:hover {
  background: #222;
}

.cards-grid {
  display: grid;
  grid-template-columns: repeat(auto-fill, minmax(300px, 1fr));
  gap: 22px;
}

.card-box {
  background: white;
  padding: 18px 20px;
  border-radius: 14px;
  box-shadow: 0 8px 24px rgba(0, 0, 0, 0.04);
  display: flex;
  flex-direction: column;
  justify-content: space-between;
  transition: 0.25s;
}

.card-box:hover {
  transform: translateY(-2px);
}

.card-box h3 {
  font-size: 16px;
  font-weight: 600;
}

.card-box p {
  color: #555;
  margin-top: 6px;
  line-height: 1.6;
  flex-grow: 1;
}

.card-actions {
  display: flex;
  gap: 10px;
  margin-top: 12px;
}

.card-actions button {
  padding: 6px 12px;
  border-radius: 8px;
  border: none;
  background: #f3f4f6;
  cursor: pointer;
}

.card-actions button:hover {
  background: #e5e7eb;
}

.card-box input,
.card-box textarea {
  width: 100%;
  padding: 8px;
  margin-bottom: 8px;
  border-radius: 8px;
  border: 1px solid #ddd;
}

.card-box textarea {
  resize: none;
  min-height: 90px;
}

.btn.save {
  background: black;
  color: white;
}

.btn.save:hover {
  background: #222;
}

/* HISTORY PAGE */

.history-container {
  max-width: 900px;
  margin: 40px auto;
  padding: 0 20px;
}

.history-container h1 {
  font-size: 26px;
  margin-bottom: 6px;
}

.history-subtitle {
  color: #6b7280;
  margin-bottom: 22px;
}

.history-list {
  background: white;
  border-radius: 14px;
  padding: 8px;
  box-shadow: 0 8px 28px rgba(0, 0, 0, 0.03);
}

.history-item {
  display: flex;
  justify-content: space-between;
  align-items: center;
  padding: 16px 14px;
  border-bottom: 1px solid #eee;
  transition: 0.2s;
}

.history-item:last-child {
  border-bottom: none;
}

.history-item:hover {
  background: #f9fafb;
}

.history-info {
  display: flex;
  align-items: center;
  gap: 14px;
}

.file-icon {
  background: #f3f4f6;
  border-radius: 10px;
  padding: 10px;
  font-size: 18px;
}

.file-name {
  font-weight: 600;
}

.file-meta {
  font-size: 13px;
  color: #6b7280;
  margin-top: 2px;
}

.view-btn {
  background: #111827;
  color: white;
  border: none;
  padding: 8px 16px;
  border-radius: 10px;
  cursor: pointer;
}

.view-btn:hover {
  background: #000;
}

/* Кнопка Удалить на истории */
.delete-btn {
  background: #ef4444;
  /* красный цвет, в стиле danger */
  color: white;
  border: none;
  padding: 8px 16px;
  border-radius: 10px;
  cursor: pointer;
  transition: 0.2s;
}

.delete-btn:hover {
  background: #dc2626;
  /* чуть темнее при наведении */
}

/* Контейнер с кнопками Посмотреть и Удалить */
.history-actions {
  display: flex;
  gap: 8px;
}

/* Дата создания под количеством карточек */
.file-date {
  font-size: 12px;
  color: #9ca3af;
  /* светло-серый, как у других второстепенных текстов */
  margin-top: 2px;
}

/* Поддержка адаптивности: кнопки и текст выровнены по центру */
.history-item {
  display: flex;
  justify-content: space-between;
  align-items: center;
  padding: 16px 14px;
  border-bottom: 1px solid #eee;
  transition: 0.2s;
}

.history-info {
  display: flex;
  align-items: center;
  gap: 14px;
}

.history-info>div {
  display: flex;
  flex-direction: column;
}
#src/types.ts
export type Flashcard = {
  id?: number;
  question: string;
  answer: string;
};

export type Group = {
  id: number;
  filename: string;
  created_at: string;
  flashcards_count?: number;
};

export type LoginResponse = {
  access_token: string;
};

#src/components/Navbar.css
.navbar {
  display: flex;
  align-items: center;
  padding: 14px 24px;
  background: white;
  border-bottom: 1px solid #e5e7eb;
  font-family: "Inter", sans-serif;
}

/* Левая часть */
.nav-left {
  display: flex;
  align-items: center;
  gap: 12px;
}

.nav-logo {
  background: black;
  color: white;
  border-radius: 10px;
  padding: 10px;
  font-size: 20px;
}

.nav-title {
  font-size: 18px;
  font-weight: 600;
}

/* Ссылки рядом с логотипом */
.nav-links {
  display: flex;
  gap: 28px;
  margin-left: 24px; /* Отступ от логотипа */
}

/* Кнопка выхода справа */
.nav-logout {
  margin-left: auto; /* «Толкает» кнопку вправо */
}

.nav-link {
  color: #444;
  font-size: 15px;
  text-decoration: none;
  transition: 0.2s;
}

.nav-link:hover {
  color: black;
}

.nav-link.active {
  color: black;
  font-weight: 600;
}

.logout-btn {
  background: transparent;
  border: none;
  font-size: 15px;
  cursor: pointer;
  color: #444;
  transition: 0.2s;
}

.logout-btn:hover {
  color: black;
}

#src/components/Navbar.tsx
import { NavLink, useNavigate } from "react-router-dom";
import { useAuth } from "../AuthContext";
import "./Navbar.css";

export default function Navbar() {
  const { logout } = useAuth();
  const nav = useNavigate();

  return (
    <header className="navbar">
      {/* Левая часть: логотип + SmartCards */}
      <div
        className="nav-left"
        onClick={() => nav("/")}
        style={{ cursor: "pointer" }}
      >
        <div className="nav-logo">⚡</div>
        <span className="nav-title">SmartCards</span>
      </div>

      {/* Ссылки рядом с логотипом */}
      <div className="nav-links">
        <NavLink
          to="/"
          className={({ isActive }) =>
            isActive ? "nav-link active" : "nav-link"
          }
        >
          Главная
        </NavLink>

        <NavLink
          to="/history"
          className={({ isActive }) =>
            isActive ? "nav-link active" : "nav-link"
          }
        >
          История
        </NavLink>
      </div>

      {/* Кнопка выхода справа */}
      <div className="nav-logout">
        <button className="logout-btn" onClick={logout}>
          Выйти
        </button>
      </div>
    </header>
  );
}

#src/pages/Group.tsx
import { useParams } from "react-router-dom";
import { useEffect, useState } from "react";
import api from "../api";
import Navbar from "../components/Navbar";
import { Flashcard } from "../types";

export default function Group() {
  const { id } = useParams<{ id: string }>();
  const [cards, setCards] = useState<Flashcard[]>([]);
  const [loading, setLoading] = useState(false);
  const [editingIndex, setEditingIndex] = useState<number | null>(null);

  const load = async () => {
    setLoading(true);
    const res = await api.get<Flashcard[]>(`/flashcards/group/${id}`);
    setCards(res.data);
    setLoading(false);
  };

  const del = async (cid: number) => {
    if (!confirm("Удалить карточку?")) return;
    await api.delete(`/flashcards/${cid}`);
    load();
  };

  const save = async (c: Flashcard) => {
    if (!c.question || !c.answer) return alert("Заполни поля");

    if (c.id) await api.put(`/flashcards/${c.id}`, c);
    else await api.post(`/flashcards?group_id=${id}`, c);

    setEditingIndex(null);
    load();
  };

  useEffect(() => {
    load();
  }, [id]);

  if (loading) return <div>Загрузка...</div>;

  return (
    <>
      <Navbar />
      <div className="group-container">
        <button
          onClick={() => setCards([{ question: "", answer: "" }, ...cards])}
        >
          + Добавить
        </button>

        {cards.map((c, i) => (
          <div key={c.id ?? i}>
            {editingIndex === i ? (
              <>
                <input
                  value={c.question}
                  onChange={(e) => {
                    const copy = [...cards];
                    copy[i] = { ...copy[i], question: e.target.value };
                    setCards(copy);
                  }}
                />
                <textarea
                  value={c.answer}
                  onChange={(e) => {
                    const copy = [...cards];
                    copy[i] = { ...copy[i], answer: e.target.value };
                    setCards(copy);
                  }}
                />
                <button onClick={() => save(c)}>Сохранить</button>
              </>
            ) : (
              <>
                <h3>{c.question}</h3>
                <p>{c.answer}</p>
                <button onClick={() => setEditingIndex(i)}>Изменить</button>
                {c.id !== undefined && (
                  <button onClick={() => del(c.id)}>Удалить</button>
                )}
              </>
            )}
          </div>
        ))}
      </div>
    </>
  );
}

#src/pages/History.tsx
import { useEffect, useState } from "react";
import api from "../api";
import { useNavigate } from "react-router-dom";
import Navbar from "../components/Navbar";
import { Group } from "../types";

export default function History() {
  const [groups, setGroups] = useState<Group[]>([]);
  const nav = useNavigate();

  const load = async () => {
    const res = await api.get<Group[]>("/groups");
    setGroups(res.data);
  };

  useEffect(() => {
    load();
  }, []);

  return (
    <>
      <Navbar />
      {groups.map((g) => (
        <div key={g.id}>
          <b>{g.filename}</b>
          <button onClick={() => nav(`/group/${g.id}`)}>Открыть</button>
        </div>
      ))}
    </>
  );
}

#src/pages/Home.tsx
import { useState, useRef } from "react";
import { useNavigate } from "react-router-dom";
import Navbar from "../components/Navbar";

export default function Home() {
  const [file, setFile] = useState<File | null>(null);
  const ref = useRef<HTMLInputElement>(null);
  const nav = useNavigate();

  return (
    <>
      <Navbar />
      <button onClick={() => ref.current?.click()}>Выбрать PDF</button>

      <input
        type="file"
        ref={ref}
        accept="application/pdf"
        hidden
        onChange={(e) => {
          const f = e.target.files?.[0];
          if (f) setFile(f);
        }}
      />

      {file && (
        <button onClick={() => nav("/loading", { state: { file } })}>
          Загрузить
        </button>
      )}
    </>
  );
}

#src/pages/Loading.tsx
import { useEffect } from "react";
import { useNavigate, useLocation } from "react-router-dom";
import api from "../api";
import Navbar from "../components/Navbar";

export default function Loading() {
  const nav = useNavigate();
  const { state } = useLocation() as { state: { file?: File } };

  useEffect(() => {
    if (!state?.file) {
      nav("/");
      return;
    }

    const send = async () => {
      const fd = new FormData();
      fd.append("file", state.file!);
      const res = await api.post("/groups/upload", fd);
      nav(`/group/${res.data.group_id}`);
    };

    send();
  }, []);

  return (
    <>
      <Navbar />
      <h2>Загрузка...</h2>
    </>
  );
}

#src/pages/Login.tsx
import { useState } from "react";
import api from "../api";
import { useNavigate } from "react-router-dom";
import { useAuth } from "../AuthContext";
import { LoginResponse } from "../types";

export default function Login() {
  const [email, setEmail] = useState("");
  const [password, setPassword] = useState("");
  const nav = useNavigate();
  const { login } = useAuth();

  const submit = async () => {
    const fd = new FormData();
    fd.append("username", email);
    fd.append("password", password);

    const res = await api.post<LoginResponse>("/auth/login", fd);
    login(res.data.access_token);
    nav("/");
  };

  return (
    <div>
      <input value={email} onChange={(e) => setEmail(e.target.value)} />
      <input
        type="password"
        value={password}
        onChange={(e) => setPassword(e.target.value)}
      />
      <button onClick={submit}>Войти</button>
    </div>
  );
}

#src/pages/Register.tsx
import { useState } from "react";
import api from "../api";
import { useNavigate } from "react-router-dom";

type Form = {
  full_name: string;
  email: string;
  password: string;
  password2: string;
};

export default function Register() {
  const [form, setForm] = useState<Form>({
    full_name: "",
    email: "",
    password: "",
    password2: "",
  });

  const nav = useNavigate();

  const submit = async () => {
    if (form.password !== form.password2) return alert("Пароли не совпадают");

    await api.post("/auth/register", {
      full_name: form.full_name,
      email: form.email,
      password: form.password,
    });

    nav("/login");
  };

  return (
    <div>
      <input
        placeholder="Имя"
        onChange={(e) => setForm({ ...form, full_name: e.target.value })}
      />
      <input
        placeholder="Email"
        onChange={(e) => setForm({ ...form, email: e.target.value })}
      />
      <input
        type="password"
        placeholder="Пароль"
        onChange={(e) => setForm({ ...form, password: e.target.value })}
      />
      <input
        type="password"
        placeholder="Повтор"
        onChange={(e) => setForm({ ...form, password2: e.target.value })}
      />
      <button onClick={submit}>Регистрация</button>
    </div>
  );
}

